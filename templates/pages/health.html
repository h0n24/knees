{% extends "base_authenticated.html" %}

{% block title %}Health | Knees{% endblock %}

{% block content %}
<section class="hero">
    <div class="hero__text">
        <h1>{{ title }}</h1>
        <p>Signed in as <strong>{{ request.user.username }}</strong></p>
        <p>{{ headline }}</p>
    </div>
</section>

<section class="grid two-columns">
    <div class="panel">
        <div class="panel__heading">
            <h2>Today&apos;s checks</h2>
            <span class="pill">4 tasks</span>
        </div>
        <div class="task-list">
            {% for task in tasks %}
            <div class="task-item task-status{% if task.complete %} is-complete{% endif %}">
                <div class="task-icon">{% if task.complete %}✓{% else %}○{% endif %}</div>
                <div class="task-content">
                    <p class="task-title">{{ task.title }}</p>
                    {% if task.label %}
                    <p class="task-label">{{ task.label }}</p>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="cta">
            <a class="button wide" href="{% url 'exercise_session' %}{{ session_cta_suffix }}">{{ session_cta_label }}</a>
        </div>
    </div>

    <div class="panel" id="start-session">
        <div class="panel__heading">
            <h2>Today&apos;s plan</h2>
            <span class="pill">Your schedule</span>
        </div>
        {% if todays_exercises %}
        <div class="exercise-list">
            <ol>
                {% for item in todays_exercises %}
                <li>
                    <div class="card">
                        <div class="card__header">
                            <strong>{{ item.exercise.name }}</strong>
                            <span class="pill">Difficulty {{ item.exercise.difficulty_range }}</span>
                        </div>
                        <p>{{ item.exercise.notes }}</p>
                    </div>
                </li>
                {% endfor %}
            </ol>
        </div>
        {% else %}
        <p>No exercises scheduled for today yet. Come back after your first login.</p>
        {% endif %}
    </div>
</section>
{% endblock %}
