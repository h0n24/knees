{% extends "pages/trainer_base.html" %}

{% block trainer_content %}
<div class="panel trainer-panel">
  <div class="panel__heading">
    <h2>Users</h2>
    <p class="hero__subdued">Overview of everyone in training</p>
  </div>
  <div class="table-wrapper">
    <table class="data-table">
      <thead>
        <tr>
          <th>User</th>
          <th>Today</th>
          <th>Sleep</th>
          <th>Nutrition</th>
          <th>Fatigue</th>
          <th>Adherence</th>
          <th>Next session</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for person in people %}
        <tr>
          <td class="table-title">
            <div class="table-title__primary">{{ person.user.username }}</div>
            <div class="muted">{{ person.user.email|default:'Member' }}</div>
          </td>
          <td>{{ person.today_count }} planned</td>
          <td>{% if person.sleep_hours %}{{ person.sleep_hours }} hrs{% else %}—{% endif %}</td>
          <td>{% if person.nutrition %}{{ person.nutrition }}{% else %}—{% endif %}</td>
          <td>{% if person.fatigue %}{{ person.fatigue }} / 50{% else %}—{% endif %}</td>
          <td><span class="badge">{{ person.adherence }}%</span></td>
          <td>{% if person.next_day %}{{ person.next_day }}{% else %}—{% endif %}</td>
          <td><a class="link" href="{% url 'trainer_user' person.user.username %}">Open</a></td>
        </tr>
        {% empty %}
        <tr><td colspan="8">No users found yet.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
